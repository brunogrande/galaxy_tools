<tool id="exomecnv" name="Segment copy number states in paired exomes">
    <command interpreter="Rscript">exomecnv.R -a $tumor_coverage
                                              -b $normal_coverage
                                              -c $read_length
                                              -d $admixture_rate
                                              -e $chr_list
                                              -f $sens_exon
                                              -r $spec_exon
                                              -h $opt_exon
                                              -i $sens_segment
                                              -j $spec_segment
                                              -k $opt_segment
                                              -l $coverage_cutoff
                                              -m $cnv_png
                                              -n $cnv_txt
                                              -o $exon_lrr_txt
                                              -p $segment_copynumber_txt
                                              -q $segment_lrr_txt
    </command>

    <inputs>
        <param name="tumor_coverage" type="data" format="tabular" label="Tumor coverage" help="sample_interval_summary file from GATK DepthOfCoverage" />
        <param name="normal_coverage" type="data" format="tabular" label="Normal coverage" help="sample_interval_summary file from GATK DepthOfCoverage" />
        <param name="read_length" type="integer" label="Average read length" value="100" />
        <param name="admixture_rate" type="float" label="Admixture rate" help="Proportion of normal cells in tumor sample" value="0.3" />
        <param name="chr_list" type="text" label="Chromosome list" help="Comma-separated list, no spaces" value="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,X,Y" />
        <param name="sens_exon" type="float" label="Exon sensitivity" help="Sensitivity to use when calling CNV for each exon" value="0.9999" />
        <param name="spec_exon" type="float" label="Exon specificity" help="Specificity to use when calling CNV for each exon" value="0.9999" />
        <param name="opt_exon" type="select" label="Exon statistic" help="Statistic to optimize when calling CNV for each exon" value="spec">
             <option value="spec">specificity</option>
             <option value="sens">sensitivity</option>
             <option value="auc">area under ROC curve</option>
        </param>
        <param name="sens_segment" type="float" label="Segment sensitivity" help="Sensitivity to use when combining CNV into segments" value="0.99" />
        <param name="spec_segment" type="float" label="Segment specificity" help="Specificity to use when combining CNV into segments" value="0.99" />
        <param name="opt_segment" type="select" label="Segment statistic" help="Statistic to optimize when combining CNV into segments" value="auc">
             <option value="auc">area under ROC curve</option>
             <option value="sens">sensitivity</option>
             <option value="spec">specificity</option>
        </param>
        <param name="coverage_cutoff" type="integer" label="Coverage cutoff" value="5" />
    </inputs>

    <outputs>
        <data format="png" name="cnv_png" />
        <data format="tabular" name="cnv_txt" />
        <data format="tabular" name="exon_lrr_txt" />
        <data format="tabular" name="segment_copynumber_txt" />
        <data format="tabular" name="segment_lrr_txt" />
    </outputs>

    <stdio>
        <exit_code range="1:" level="fatal" description="Failure" />
    </stdio>

    <requirements>
        <requirement type="package" version="1.4">exomecnv</requirement>
    </requirements>
</tool>
